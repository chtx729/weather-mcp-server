┌─────────────────────────────────────────────────────────────────┐
│                      MCP Server 代码结构                         │
└─────────────────────────────────────────────────────────────────┘
                               │
           ┌──────────────────┼──────────────────┐
           ▼                  ▼                  ▼
┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐
│  入口文件        │  │  配置管理        │  │  工具定义        │
│ src/index.js    │  │ config/config.js │  │  src/tools.js   │
└────────┬────────┘  └────────┬────────┘  └────────┬────────┘
         │                    │                    │
         │                    │                    │
         ▼                    │                    ▼
┌─────────────────┐           │           ┌─────────────────┐
│ McpServer 实例   │◄──────────┘           │  工具实现逻辑    │
│ - 名称/版本      │                       │ - 参数验证(zod)  │
│ - 错误处理       │                       │ - 业务逻辑       │
│ - 连接管理       │                       │ - 返回格式化     │
└────────┬────────┘                       └────────┬────────┘
         │                                         │
         │                                         │
         ▼                                         ▼
┌─────────────────┐                      ┌─────────────────┐
│ 传输层          │                      │ 外部API封装      │
│ StdioTransport  │                      │ src/weather-api.js│
└────────┬────────┘                      └────────┬────────┘
         │                                         │
         │                                         │
         ▼                                         ▼
┌─────────────────┐                      ┌─────────────────┐
│ 客户端通信       │                      │ 第三方服务       │
│ (MCP协议)       │                      │ OpenWeatherMap  │
└─────────────────┘                      └─────────────────┘